package lumicode.agendaja.api.repository;

import org.springframework.data.jpa.repository.JpaRepository;
import org.springframework.data.jpa.repository.Query;

import lumicode.agendaja.api.model.Agendamento;
import lumicode.agendaja.api.model.Servico;

public interface AgendamentoRepository
	extends JpaRepository<Agendamento, Long>{
	
	
	@Query("\r\n" + 
			"SELECT s.servico, s.preco , cs.categoriaServico\r\n" + 
			"	FROM Agendamento a INNER JOIN Estabelecimento e\r\n" + 
			"    ON a.idEstabelecimento = e.idEstabelecimento INNER JOIN Cliente c\r\n" + 
			"    ON a.idCliente = c.idCliente INNER JOIN Funcionario f\r\n" + 
			"    ON a.idFuncionario = f.idFuncionario INNER JOIN AgendamentoServico  ags\r\n" + 
			"    ON a.idAgendamento = ags.idAgendamento INNER JOIN Servico s\r\n" + 
			"    ON ags.idServico = s.idServico INNER JOIN CategoriaServico  cs\r\n" + 
			"    ON s.idCategoriaServico = cs.idCategoriaServico WHERE a.idAgendamento = ?1")
	public Servico pegarServico(Long idAgendamento);
	
	
}
